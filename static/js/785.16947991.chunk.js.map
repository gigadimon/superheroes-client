{"version":3,"file":"static/js/785.16947991.chunk.js","mappings":"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","sources":["webpack://superheroes-client/./src/components/Home/Home.module.css?58dd","webpack://superheroes-client/./src/components/Home/HeroesList/Hero/Hero.module.css?c820","components/Home/HeroesList/Hero/Hero.jsx","webpack://superheroes-client/./src/components/Home/HeroesList/HeroesList.module.css?2c11","components/Home/HeroesList/HeroesList.jsx","components/Home/Home.jsx","webpack://superheroes-client/./src/components/Modal/Form/Form.module.css?71f3","components/Modal/Form/Form.jsx","webpack://superheroes-client/./src/components/Modal/Modal.module.css?28d7","components/Modal/Modal.jsx","middlewares/asyncMiddlewares.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"homeSection\":\"Home_homeSection__+oqBa\",\"defaultText\":\"Home_defaultText__dVZ68\",\"createButton\":\"Home_createButton__+6G3W\"};","// extracted by mini-css-extract-plugin\nexport default {\"hero\":\"Hero_hero__BYTKj\",\"link\":\"Hero_link__5O9sU\",\"image\":\"Hero_image__sPpQC\",\"heroName\":\"Hero_heroName__987ZC\"};","import { Link } from 'react-router-dom';\nimport { BASE_IMG_URL } from 'middlewares/asyncMiddlewares';\nimport s from './Hero.module.css';\n\nexport function Hero({ hero }) {\n  const { _id: id, nickname, images } = hero;\n  return (\n    <li key={id} className={s.hero}>\n      <Link to={`${id}`} className={s.link}>\n        <img\n          className={s.image}\n          width=\"250\"\n          height=\"250\"\n          src={\n            images[0]\n              ? `${BASE_IMG_URL}/${images[0]}`\n              : `${BASE_IMG_URL}/default.png`\n          }\n          alt={`${nickname} avatar`}\n        />\n        <h4 className={s.heroName}>{nickname}</h4>\n      </Link>\n    </li>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"HeroesList_list__ePpHc\"};","import { Hero } from './Hero';\nimport s from './HeroesList.module.css';\n\nexport function HeroesList({ heroes }) {\n  return (\n    <ul className={s.list}>\n      {heroes.map(hero => (\n        <Hero key={hero._id} hero={hero} />\n      ))}\n    </ul>\n  );\n}\n","import s from './Home.module.css';\nimport { Button } from '@mui/material';\nimport { useState, useEffect, useContext } from 'react';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { Modal } from 'components/Modal/Modal';\nimport { HeroesList } from './HeroesList';\nimport { getAllHeroes, createHero } from 'middlewares/asyncMiddlewares';\nimport { useSearchParams } from 'react-router-dom';\nimport { ModalContext } from 'components/AppProvider';\n\nexport default function Home() {\n  const [heroes, setHeroes] = useState([]);\n  const [params, setParams] = useSearchParams();\n  const { openModal } = useContext(ModalContext);\n  const pageInUrl = Number(params.get('page'));\n  const [page, setPage] = useState(1);\n  const [limit, setLimit] = useState(5 * pageInUrl || 5);\n  const [total, setTotal] = useState(null);\n\n  useEffect(() => {\n    getAllHeroes(limit, page).then(({ heroes: newHeroes, total }) => {\n      setHeroes(prevState =>\n        page > 1 ? [...prevState, ...newHeroes] : newHeroes\n      );\n      setTotal(total);\n    });\n  }, [page, limit]);\n\n  useEffect(() => {\n    if (heroes.length === total) {\n      Notify.info('These`re all', {\n        timeout: 2000,\n        clickToClose: true,\n      });\n    }\n  }, [heroes.length, total]);\n\n  async function createNewHero(formData) {\n    const response = await createHero(formData);\n    if (response) {\n      const { data: hero } = response.data;\n      setHeroes(prevState => [...prevState, hero]);\n      Notify.success(`Hero ${hero.nickname} created`, {\n        timeout: 2000,\n        clickToClose: true,\n      });\n    }\n  }\n\n  function loadMore() {\n    const nextPage = pageInUrl ? pageInUrl + 1 : 2;\n    setParams(`page=${nextPage}`);\n    setPage(nextPage);\n    setLimit(5);\n  }\n\n  return (\n    <section className={s.homeSection}>\n      <Modal createHero={createNewHero} />\n      {heroes.length ? (\n        <HeroesList heroes={heroes} />\n      ) : (\n        <p className={s.defaultText}>\n          You can{' '}\n          <button className={s.createButton} onClick={openModal}>\n            create\n          </button>{' '}\n          your own hero\n        </p>\n      )}\n      {heroes.length < total && <Button onClick={loadMore}>Load More</Button>}\n    </section>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"Form_form__pVoDp\",\"textInput\":\"Form_textInput__mO+aF\",\"submit\":\"Form_submit__2RJ79\",\"file\":\"Form_file__+2nLS\",\"avatar\":\"Form_avatar__SRuty\"};","import { Button, TextField } from '@mui/material';\nimport { useParams } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\n\nimport s from './Form.module.css';\n\nexport function Form({ submitHandler }) {\n  const [fileUploaded, setFileUploaded] = useState(false);\n  const { heroId } = useParams();\n\n  useEffect(() => {\n    document\n      .getElementById('avatar')\n      ?.addEventListener('change', fileChangeHandler);\n\n    return () => {\n      document\n        .getElementById('avatar')\n        ?.removeEventListener('change', fileChangeHandler);\n    };\n  }, []);\n\n  function fileChangeHandler(event) {\n    if (event.currentTarget.files.length) {\n      return setFileUploaded(true);\n    }\n    setFileUploaded(false);\n  }\n\n  return (\n    <form\n      id=\"form\"\n      encType=\"multipart/form-data\"\n      className={s.form}\n      onSubmit={e => {\n        submitHandler(e);\n        setFileUploaded(false);\n      }}\n    >\n      <div>\n        <TextField\n          required={!heroId}\n          label=\"nickname\"\n          id=\"nickname\"\n          size=\"small\"\n          name=\"nickname\"\n          className={`${s.textInput} ${s.input}`}\n        />\n        <TextField\n          label=\"real name\"\n          id=\"real_name\"\n          name=\"real_name\"\n          size=\"small\"\n          className={`${s.textInput} ${s.input}`}\n        />\n        <TextField\n          label=\"superpowers\"\n          id=\"superpowers\"\n          name=\"superpowers\"\n          size=\"small\"\n          className={`${s.textInput} ${s.input}`}\n        />\n      </div>\n      <TextField\n        fullWidth\n        label=\"description\"\n        id=\"origin_description\"\n        name=\"origin_description\"\n        className={`${s.longInput} ${s.input}`}\n      />\n      <TextField\n        fullWidth\n        label=\"catch phrase\"\n        id=\"catch_phrase\"\n        name=\"catch_phrase\"\n        className={`${s.longInput} ${s.input}`}\n      />\n      <label htmlFor=\"avatar\" className={s.avatar}>\n        {fileUploaded ? 'File uploaded' : 'Upload avatar'}\n      </label>\n      <input id=\"avatar\" name=\"avatar\" type=\"file\" className={s.file} />\n      <Button type=\"submit\" className={s.submit}>\n        {heroId ? 'edit hero' : 'create hero'}\n      </Button>\n    </form>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"formContainer\":\"Modal_formContainer__qjdQf\",\"title\":\"Modal_title__3HkNf\"};","import { Backdrop } from '@mui/material';\nimport { useContext } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { Form } from './Form';\nimport { ModalContext } from 'components/AppProvider';\n\nimport s from './Modal.module.css';\n\nexport function Modal({ editHero, createHero }) {\n  const { open, closeModal } = useContext(ModalContext);\n  const { heroId } = useParams();\n\n  function removeIfBlanc(data) {\n    for (const [prop, value] of Array.from(data)) {\n      if (!value) {\n        data.delete(prop);\n      }\n    }\n  }\n\n  async function submitHandler(event) {\n    event.preventDefault();\n    const form = event.currentTarget;\n    const formData = new FormData(form);\n    removeIfBlanc(formData);\n\n    heroId ? await editHero(formData) : await createHero(formData);\n    form.reset();\n    closeModal();\n  }\n\n  return (\n    <Backdrop\n      sx={{ color: '#fff', zIndex: theme => theme.zIndex.drawer + 1 }}\n      onClick={closeModal}\n      open={open}\n    >\n      <div className={s.formContainer}>\n        <h1 className={s.title}>\n          {heroId ? 'Enter new data for hero' : 'Enter new hero`s data'}\n        </h1>\n        <Form submitHandler={submitHandler} />\n      </div>\n    </Backdrop>\n  );\n}\n","import axios from 'axios';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\naxios.defaults.baseURL = 'http://146.59.87.87:8080/api/heroes';\nexport const BASE_IMG_URL = 'http://146.59.87.87:8080/avatars';\nNotify.init({\n  clickToClose: true,\n});\n\nexport async function createHero(body) {\n  try {\n    return await axios({\n      method: 'post',\n      url: '/',\n      data: body,\n      headers: { 'Content-Type': 'multipart/form-data' },\n    });\n  } catch (error) {\n    Notify.failure(error.response?.data?.error);\n  }\n}\n\nexport async function editHero(id, body) {\n  try {\n    return await axios({\n      method: 'patch',\n      url: `/${id}`,\n      data: body,\n      headers: { 'Content-Type': 'multipart/form-data' },\n    });\n  } catch (error) {\n    Notify.failure(error.response?.data?.error);\n  }\n}\n\nexport async function deleteHero(id) {\n  try {\n    return await axios.delete(`/${id}`);\n  } catch (error) {\n    Notify.failure(error.response?.data?.error);\n  }\n}\n\nexport async function getAllHeroes(limit = 5, page = 1) {\n  try {\n    const {\n      data: { data },\n    } = await axios(`?limit=${limit}&page=${page}`);\n    return data;\n  } catch (error) {\n    Notify.failure(error.response?.data?.error);\n  }\n}\n\nexport async function getHeroById(id) {\n  try {\n    const {\n      data: { data: hero },\n    } = await axios(`/${id}`);\n    return hero;\n  } catch (error) {\n    Notify.failure(error.response?.data?.error);\n  }\n}\n\nexport async function deleteAvatar(url) {\n  try {\n    return await axios.patch(`${url}`);\n  } catch (error) {\n    Notify.failure(error.response?.data?.error);\n  }\n}\n"],"names":["Hero","hero","id","_id","nickname","images","className","s","to","width","height","src","BASE_IMG_URL","alt","HeroesList","heroes","map","Home","useState","setHeroes","useSearchParams","params","setParams","openModal","useContext","ModalContext","pageInUrl","Number","get","page","setPage","limit","setLimit","total","setTotal","formData","createHero","response","data","prevState","Notify","timeout","clickToClose","useEffect","getAllHeroes","then","newHeroes","length","Modal","onClick","Button","nextPage","Form","submitHandler","fileUploaded","setFileUploaded","heroId","useParams","fileChangeHandler","event","currentTarget","files","document","getElementById","addEventListener","removeEventListener","encType","onSubmit","e","TextField","required","label","size","name","fullWidth","htmlFor","type","editHero","open","closeModal","removeIfBlanc","Array","from","prop","delete","preventDefault","form","FormData","reset","Backdrop","sx","color","zIndex","theme","drawer","axios","body","method","url","headers","error","deleteHero","getHeroById","deleteAvatar"],"sourceRoot":""}