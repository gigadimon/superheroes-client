"use strict";(self.webpackChunksuperheroes_client=self.webpackChunksuperheroes_client||[]).push([[785],{4785:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(5861),a=n(2982),c=n(885),o=n(4687),u=n.n(o),s="Home_homeSection__+oqBa",i="Home_defaultText__dVZ68",l="Home_createButton__+6G3W",p=n(6713),f=n(2791),d=n(5264),h=n(6075),m=n(6731),v=n(9187),x="Hero_hero__BYTKj",_="Hero_link__5O9sU",Z="Hero_image__sPpQC",y="Hero_heroName__987ZC",N=n(184);function j(e){var t=e.hero,n=t._id,r=t.nickname,a=t.images;return(0,N.jsx)("li",{className:x,children:(0,N.jsxs)(m.rU,{to:"".concat(n),className:_,children:[(0,N.jsx)("img",{className:Z,width:"250",height:"250",src:a[0]?"".concat(v.YQ,"/").concat(a[0]):"".concat(v.YQ,"/default.png"),alt:"".concat(r," avatar")}),(0,N.jsx)("h4",{className:y,children:r})]})},n)}var w="HeroesList_list__ePpHc";function g(e){var t=e.heroes;return(0,N.jsx)("ul",{className:w,children:t.map((function(e){return(0,N.jsx)(j,{hero:e},e._id)}))})}var k=n(7138);function b(){var e=(0,f.useState)([]),t=(0,c.Z)(e,2),n=t[0],o=t[1],x=(0,m.lr)(),_=(0,c.Z)(x,2),Z=_[0],y=_[1],j=(0,f.useContext)(k.t).openModal,w=Number(Z.get("page")),b=(0,f.useState)(1),C=(0,c.Z)(b,2),H=C[0],I=C[1],T=(0,f.useState)(5*w||5),S=(0,c.Z)(T,2),E=S[0],F=S[1],P=(0,f.useState)(null),L=(0,c.Z)(P,2),Q=L[0],U=L[1];function z(){return(z=(0,r.Z)(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.CZ)(t);case 2:(n=e.sent)&&(r=n.data.data,o((function(e){return[].concat((0,a.Z)(e),[r])})),d.Notify.success("Hero ".concat(r.nickname," created"),{timeout:2e3,clickToClose:!0}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,f.useEffect)((function(){(0,v.Cc)(E,H).then((function(e){var t=e.heroes,n=e.total;o((function(e){return H>1?[].concat((0,a.Z)(e),(0,a.Z)(t)):t})),U(n)}))}),[H,E]),(0,f.useEffect)((function(){n.length===Q&&d.Notify.info("These`re all",{timeout:2e3,clickToClose:!0})}),[n.length,Q]),(0,N.jsxs)("section",{className:s,children:[(0,N.jsx)(h.u,{createHero:function(e){return z.apply(this,arguments)}}),n.length?(0,N.jsx)(g,{heroes:n}):(0,N.jsxs)("p",{className:i,children:["You can"," ",(0,N.jsx)("button",{className:l,onClick:j,children:"create"})," ","your own hero"]}),n.length<Q&&(0,N.jsx)(p.Z,{onClick:function(){var e=w?w+1:2;y("page=".concat(e)),I(e),F(5)},children:"Load More"})]})}},6075:function(e,t,n){n.d(t,{u:function(){return _}});var r=n(5861),a=n(885),c=n(4687),o=n.n(c),u=n(5700),s=n(2791),i=n(7689),l=n(8993),p=n(6713),f={form:"Form_form__pVoDp",textInput:"Form_textInput__mO+aF",submit:"Form_submit__2RJ79",file:"Form_file__+2nLS",avatar:"Form_avatar__SRuty"},d=n(184);function h(e){var t=e.submitHandler,n=(0,s.useState)(!1),r=(0,a.Z)(n,2),c=r[0],o=r[1],u=(0,i.UO)().heroId;function h(e){if(e.currentTarget.files.length)return o(!0);o(!1)}return(0,s.useEffect)((function(){var e;return null===(e=document.getElementById("avatar"))||void 0===e||e.addEventListener("change",h),function(){var e;null===(e=document.getElementById("avatar"))||void 0===e||e.removeEventListener("change",h)}}),[]),(0,d.jsxs)("form",{id:"form",encType:"multipart/form-data",className:f.form,onSubmit:function(e){t(e),o(!1)},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Z,{required:!u,label:"nickname",id:"nickname",size:"small",name:"nickname",className:"".concat(f.textInput," ").concat(f.input)}),(0,d.jsx)(l.Z,{label:"real name",id:"real_name",name:"real_name",size:"small",className:"".concat(f.textInput," ").concat(f.input)}),(0,d.jsx)(l.Z,{label:"superpowers",id:"superpowers",name:"superpowers",size:"small",className:"".concat(f.textInput," ").concat(f.input)})]}),(0,d.jsx)(l.Z,{fullWidth:!0,label:"description",id:"origin_description",name:"origin_description",className:"".concat(f.longInput," ").concat(f.input)}),(0,d.jsx)(l.Z,{fullWidth:!0,label:"catch phrase",id:"catch_phrase",name:"catch_phrase",className:"".concat(f.longInput," ").concat(f.input)}),(0,d.jsx)("label",{htmlFor:"avatar",className:f.avatar,children:c?"File uploaded":"Upload avatar"}),(0,d.jsx)("input",{id:"avatar",name:"avatar",type:"file",className:f.file}),(0,d.jsx)(p.Z,{type:"submit",className:f.submit,children:u?"edit hero":"create hero"})]})}var m=n(7138),v="Modal_formContainer__qjdQf",x="Modal_title__3HkNf";function _(e){var t=e.editHero,n=e.createHero,c=(0,s.useContext)(m.t),l=c.open,p=c.closeModal,f=(0,i.UO)().heroId;function _(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=(0,a.Z)(n[t],2),c=r[0];r[1]||e.delete(c)}}function Z(){return(Z=(0,r.Z)(o().mark((function e(r){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=r.currentTarget,_(c=new FormData(a)),!f){e.next=9;break}return e.next=7,t(c);case 7:e.next=11;break;case 9:return e.next=11,n(c);case 11:a.reset(),p();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsx)(u.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},onClick:p,open:l,children:(0,d.jsxs)("div",{className:v,children:[(0,d.jsx)("h1",{className:x,children:f?"Enter new data for hero":"Enter new hero`s data"}),(0,d.jsx)(h,{submitHandler:function(e){return Z.apply(this,arguments)}})]})})}},9187:function(e,t,n){n.d(t,{CZ:function(){return i},Cc:function(){return m},Ww:function(){return p},XS:function(){return d},YQ:function(){return s},_Q:function(){return Z},iH:function(){return x}});var r=n(5861),a=n(4687),c=n.n(a),o=n(1044),u=n(5264);o.ZP.defaults.baseURL="http://146.59.87.87:8080/api/heroes";var s="http://146.59.87.87:8080/avatars";function i(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.ZP)({method:"post",url:"/",data:t,headers:{"Content-Type":"multipart/form-data"}});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),u.Notify.failure(null===(n=e.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function p(e,t){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(c().mark((function e(t,n){var r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.ZP)({method:"patch",url:"/".concat(t),data:n,headers:{"Content-Type":"multipart/form-data"}});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),u.Notify.failure(null===(r=e.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.error);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.ZP.delete("/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),u.Notify.failure(null===(n=e.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return v=(0,r.Z)(c().mark((function e(){var t,n,r,a,s,i,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:5,n=l.length>1&&void 0!==l[1]?l[1]:1,e.prev=2,e.next=5,(0,o.ZP)("?limit=".concat(t,"&page=").concat(n));case 5:return r=e.sent,a=r.data.data,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(2),u.Notify.failure(null===(s=e.t0.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.error);case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),v.apply(this,arguments)}function x(e){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(c().mark((function e(t){var n,r,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.ZP)("/".concat(t));case 3:return n=e.sent,r=n.data.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),u.Notify.failure(null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.error);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Z(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.ZP.patch("".concat(t));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),u.Notify.failure(null===(n=e.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}u.Notify.init({clickToClose:!0})}}]);
//# sourceMappingURL=785.16947991.chunk.js.map